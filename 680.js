"use strict";(self.webpackChunk_metamask_test_dapp=self.webpackChunk_metamask_test_dapp||[]).push([[680],{32680:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  SIWEController: () => (/* reexport */ SIWEController),\n  W3mConnectingSiwe: () => (/* reexport */ W3mConnectingSiwe),\n  W3mConnectingSiweView: () => (/* reexport */ W3mConnectingSiweView),\n  createSIWEConfig: () => (/* binding */ createSIWEConfig),\n  formatMessage: () => (/* reexport */ index_es/* formatMessage */.hwK),\n  getAddressFromMessage: () => (/* reexport */ getAddressFromMessage),\n  getChainIdFromMessage: () => (/* reexport */ getChainIdFromMessage),\n  getDidAddress: () => (/* reexport */ index_es/* getDidAddress */.q_h),\n  getDidChainId: () => (/* reexport */ index_es/* getDidChainId */.aG$),\n  mapToSIWX: () => (/* reexport */ mapToSIWX),\n  verifySignature: () => (/* reexport */ verifySignature)\n});\n\n// EXTERNAL MODULE: ./node_modules/valtio/esm/vanilla/utils.mjs\nvar utils = __webpack_require__(4707);\n// EXTERNAL MODULE: ./node_modules/valtio/esm/vanilla.mjs + 1 modules\nvar vanilla = __webpack_require__(29073);\n;// CONCATENATED MODULE: ./node_modules/@reown/appkit-siwe/dist/esm/core/controller/SIWEController.js\n\n\nconst state = (0,vanilla/* proxy */.BX)({\n    status: 'uninitialized'\n});\nconst SIWEController = {\n    state,\n    subscribeKey(key, callback) {\n        return (0,utils/* subscribeKey */.u$)(state, key, callback);\n    },\n    subscribe(callback) {\n        return (0,vanilla/* subscribe */.B1)(state, () => callback(state));\n    },\n    _getClient() {\n        if (!state._client) {\n            throw new Error('SIWEController client not set');\n        }\n        return state._client;\n    },\n    async getNonce(address) {\n        const client = this._getClient();\n        const nonce = await client.getNonce(address);\n        this.setNonce(nonce);\n        return nonce;\n    },\n    async getSession() {\n        try {\n            const client = this._getClient();\n            const session = await client.getSession();\n            if (session) {\n                this.setSession(session);\n                this.setStatus('success');\n            }\n            return session || undefined;\n        }\n        catch {\n            return undefined;\n        }\n    },\n    createMessage(args) {\n        const client = this._getClient();\n        const message = client.createMessage(args);\n        this.setMessage(message);\n        return message;\n    },\n    async verifyMessage(args) {\n        const client = this._getClient();\n        const isValid = await client.verifyMessage(args);\n        return isValid;\n    },\n    async signIn() {\n        const client = this._getClient();\n        const session = await client.signIn();\n        return session;\n    },\n    async signOut() {\n        const client = this._getClient();\n        await client.signOut();\n        this.setStatus('ready');\n        this.setSession(undefined);\n        client.onSignOut?.();\n    },\n    onSignIn(args) {\n        const client = this._getClient();\n        client.onSignIn?.(args);\n    },\n    onSignOut() {\n        const client = this._getClient();\n        client.onSignOut?.();\n    },\n    async setSIWEClient(client) {\n        state._client = (0,vanilla/* ref */.KR)(client);\n        state.session = await this.getSession();\n        state.status = state.session ? 'success' : 'ready';\n    },\n    setNonce(nonce) {\n        state.nonce = nonce;\n    },\n    setStatus(status) {\n        state.status = status;\n    },\n    setMessage(message) {\n        state.message = message;\n    },\n    setSession(session) {\n        state.session = session;\n        state.status = session ? 'success' : 'ready';\n    }\n};\n//# sourceMappingURL=SIWEController.js.map\n// EXTERNAL MODULE: ./node_modules/@reown/appkit-core/dist/esm/exports/index.js + 32 modules\nvar esm_exports = __webpack_require__(1542);\n// EXTERNAL MODULE: ./node_modules/@reown/appkit-common/dist/esm/index.js + 13 modules\nvar esm = __webpack_require__(79066);\n;// CONCATENATED MODULE: ./node_modules/@reown/appkit-siwe/dist/esm/core/utils/ConstantsUtil.js\nconst ConstantsUtil = {\n    FIVE_MINUTES_IN_MS: 300000\n};\n//# sourceMappingURL=ConstantsUtil.js.map\n;// CONCATENATED MODULE: ./node_modules/@reown/appkit-siwe/dist/esm/src/client.js\n\n\n\n\nclass AppKitSIWEClient {\n    constructor(siweConfig) {\n        const { enabled = true, nonceRefetchIntervalMs = ConstantsUtil.FIVE_MINUTES_IN_MS, sessionRefetchIntervalMs = ConstantsUtil.FIVE_MINUTES_IN_MS, signOutOnAccountChange = true, signOutOnDisconnect = true, signOutOnNetworkChange = true, ...siweConfigMethods } = siweConfig;\n        this.options = {\n            enabled,\n            nonceRefetchIntervalMs,\n            sessionRefetchIntervalMs,\n            signOutOnDisconnect,\n            signOutOnAccountChange,\n            signOutOnNetworkChange\n        };\n        this.methods = siweConfigMethods;\n    }\n    async getNonce(address) {\n        const nonce = await this.methods.getNonce(address);\n        if (!nonce) {\n            throw new Error('siweControllerClient:getNonce - nonce is undefined');\n        }\n        return nonce;\n    }\n    async getMessageParams() {\n        return ((await this.methods.getMessageParams?.()) || {});\n    }\n    createMessage(args) {\n        const message = this.methods.createMessage(args);\n        if (!message) {\n            throw new Error('siweControllerClient:createMessage - message is undefined');\n        }\n        return message;\n    }\n    async verifyMessage(args) {\n        const isValid = await this.methods.verifyMessage(args);\n        return isValid;\n    }\n    async getSession() {\n        const session = await this.methods.getSession();\n        if (!session) {\n            throw new Error('siweControllerClient:getSession - session is undefined');\n        }\n        return session;\n    }\n    async signIn() {\n        if (!SIWEController.state._client) {\n            throw new Error('SIWE client needs to be initialized before calling signIn');\n        }\n        const caipAddress = esm_exports/* ChainController */.WB.state.activeCaipAddress;\n        const address = caipAddress ? esm_exports/* CoreHelperUtil */.wE.getPlainAddress(caipAddress) : '';\n        const nonce = await this.methods.getNonce(address);\n        if (!address) {\n            throw new Error('An address is required to create a SIWE message.');\n        }\n        const caipNetwork = esm_exports/* ChainController */.WB.state.activeCaipNetwork;\n        if (!caipNetwork?.id) {\n            throw new Error('A chainId is required to create a SIWE message.');\n        }\n        const chainId = caipNetwork.id;\n        if (!chainId) {\n            throw new Error('A chainId is required to create a SIWE message.');\n        }\n        const signOutOnNetworkChange = SIWEController.state._client?.options.signOutOnNetworkChange;\n        if (signOutOnNetworkChange) {\n            SIWEController.state._client.options.signOutOnNetworkChange = false;\n            await this.signOut();\n        }\n        if (signOutOnNetworkChange) {\n            SIWEController.state._client.options.signOutOnNetworkChange = true;\n        }\n        const messageParams = await this.getMessageParams?.();\n        const message = this.methods.createMessage({\n            address: caipAddress,\n            chainId: Number(chainId),\n            nonce,\n            version: '1',\n            iat: messageParams?.iat || new Date().toISOString(),\n            ...messageParams\n        });\n        const type = esm_exports/* StorageUtil */.iT.getConnectedConnector();\n        if (type === 'ID_AUTH') {\n            esm_exports/* RouterController */.IN.pushTransactionStack({\n                view: null,\n                goBack: false,\n                replace: true,\n                onSuccess() {\n                    esm_exports/* ModalController */.W3.close();\n                }\n            });\n        }\n        const signature = await esm_exports/* ConnectionController */.x4.signMessage(message);\n        const isValid = await this.methods.verifyMessage({ message, signature: signature });\n        if (!isValid) {\n            throw new Error('Error verifying SIWE signature');\n        }\n        const session = await this.methods.getSession();\n        if (!session) {\n            throw new Error('Error verifying SIWE signature');\n        }\n        if (this.methods.onSignIn) {\n            this.methods.onSignIn(session);\n        }\n        return session;\n    }\n    async signOut() {\n        this.methods.onSignOut?.();\n        return this.methods.signOut();\n    }\n}\n//# sourceMappingURL=client.js.map\n// EXTERNAL MODULE: ./node_modules/@walletconnect/utils/dist/index.es.js + 8 modules\nvar index_es = __webpack_require__(51959);\n;// CONCATENATED MODULE: ./node_modules/@reown/appkit-siwe/dist/esm/core/helpers/index.js\n\nconst ETH_ADDRESS_PATTERN = /0x[a-fA-F0-9]{40}/u;\nconst ETH_CHAIN_ID_IN_SIWE_PATTERN = /Chain ID: (?<temp1>\\d+)/u;\nfunction getAddressFromMessage(message) {\n    return message.match(ETH_ADDRESS_PATTERN)?.[0] || '';\n}\nfunction getChainIdFromMessage(message) {\n    return `eip155:${message.match(ETH_CHAIN_ID_IN_SIWE_PATTERN)?.[1] || 1}`;\n}\nasync function verifySignature({ address, message, signature, chainId, projectId }) {\n    let isValid = (0,index_es/* isValidEip191Signature */.quX)(address, message, signature);\n    if (!isValid) {\n        isValid = await (0,index_es/* isValidEip1271Signature */.ucy)(address, message, signature, chainId, projectId);\n    }\n    return isValid;\n}\n//# sourceMappingURL=index.js.map\n// EXTERNAL MODULE: ./node_modules/@reown/appkit-ui/dist/esm/index.js + 265 modules\nvar dist_esm = __webpack_require__(57104);\n// EXTERNAL MODULE: ./node_modules/lit/index.js + 2 modules\nvar lit = __webpack_require__(91260);\n;// CONCATENATED MODULE: ./node_modules/@reown/appkit-siwe/dist/esm/scaffold/partials/w3m-connecting-siwe/styles.js\n\n/* harmony default export */ const styles = ((0,lit/* css */.AH) `\n  :host {\n    display: flex;\n    justify-content: center;\n    gap: var(--wui-spacing-2xl);\n  }\n\n  wui-visual-thumbnail:nth-child(1) {\n    z-index: 1;\n  }\n`);\n//# sourceMappingURL=styles.js.map\n;// CONCATENATED MODULE: ./node_modules/@reown/appkit-siwe/dist/esm/scaffold/partials/w3m-connecting-siwe/index.js\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\n\nlet W3mConnectingSiwe = class W3mConnectingSiwe extends lit/* LitElement */.WF {\n    constructor() {\n        super(...arguments);\n        this.dappImageUrl = esm_exports/* OptionsController */.Hd.state.metadata?.icons;\n        this.walletImageUrl = esm_exports/* AccountController */.Uj.state.connectedWalletInfo?.icon;\n    }\n    firstUpdated() {\n        const visuals = this.shadowRoot?.querySelectorAll('wui-visual-thumbnail');\n        if (visuals?.[0]) {\n            this.createAnimation(visuals[0], 'translate(18px)');\n        }\n        if (visuals?.[1]) {\n            this.createAnimation(visuals[1], 'translate(-18px)');\n        }\n    }\n    render() {\n        return (0,lit/* html */.qy) `\n      <wui-visual-thumbnail\n        ?borderRadiusFull=${true}\n        .imageSrc=${this.dappImageUrl?.[0]}\n      ></wui-visual-thumbnail>\n      <wui-visual-thumbnail .imageSrc=${this.walletImageUrl}></wui-visual-thumbnail>\n    `;\n    }\n    createAnimation(element, translation) {\n        element.animate([{ transform: 'translateX(0px)' }, { transform: translation }], {\n            duration: 1600,\n            easing: 'cubic-bezier(0.56, 0, 0.48, 1)',\n            direction: 'alternate',\n            iterations: Infinity\n        });\n    }\n};\nW3mConnectingSiwe.styles = styles;\nW3mConnectingSiwe = __decorate([\n    (0,dist_esm.customElement)('w3m-connecting-siwe')\n], W3mConnectingSiwe);\n\n//# sourceMappingURL=index.js.map\n// EXTERNAL MODULE: ./node_modules/lit/decorators.js\nvar decorators = __webpack_require__(25707);\n// EXTERNAL MODULE: ./node_modules/@reown/appkit-wallet/dist/esm/index.js + 8 modules\nvar appkit_wallet_dist_esm = __webpack_require__(41457);\n;// CONCATENATED MODULE: ./node_modules/@reown/appkit-siwe/dist/esm/scaffold/views/w3m-connecting-siwe-view/index.js\nvar w3m_connecting_siwe_view_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\n\n\n\nlet W3mConnectingSiweView = class W3mConnectingSiweView extends lit/* LitElement */.WF {\n    constructor() {\n        super(...arguments);\n        this.dappName = esm_exports/* OptionsController */.Hd.state.metadata?.name;\n        this.isSigning = false;\n        this.isCancelling = false;\n    }\n    render() {\n        return (0,lit/* html */.qy) `\n      <wui-flex justifyContent=\"center\" .padding=${['2xl', '0', 'xxl', '0']}>\n        <w3m-connecting-siwe></w3m-connecting-siwe>\n      </wui-flex>\n      <wui-flex\n        .padding=${['0', '4xl', 'l', '4xl']}\n        gap=\"s\"\n        justifyContent=\"space-between\"\n      >\n        <wui-text variant=\"paragraph-500\" align=\"center\" color=\"fg-100\"\n          >${this.dappName ?? 'Dapp'} needs to connect to your wallet</wui-text\n        >\n      </wui-flex>\n      <wui-flex\n        .padding=${['0', '3xl', 'l', '3xl']}\n        gap=\"s\"\n        justifyContent=\"space-between\"\n      >\n        <wui-text variant=\"small-400\" align=\"center\" color=\"fg-200\"\n          >Sign this message to prove you own this wallet and proceed. Canceling will disconnect\n          you.</wui-text\n        >\n      </wui-flex>\n      <wui-flex .padding=${['l', 'xl', 'xl', 'xl']} gap=\"s\" justifyContent=\"space-between\">\n        <wui-button\n          size=\"lg\"\n          borderRadius=\"xs\"\n          fullWidth\n          variant=\"neutral\"\n          ?loading=${this.isCancelling}\n          @click=${this.onCancel.bind(this)}\n          data-testid=\"w3m-connecting-siwe-cancel\"\n        >\n          Cancel\n        </wui-button>\n        <wui-button\n          size=\"lg\"\n          borderRadius=\"xs\"\n          fullWidth\n          variant=\"main\"\n          @click=${this.onSign.bind(this)}\n          ?loading=${this.isSigning}\n          data-testid=\"w3m-connecting-siwe-sign\"\n        >\n          ${this.isSigning ? 'Signing...' : 'Sign'}\n        </wui-button>\n      </wui-flex>\n    `;\n    }\n    async onSign() {\n        this.isSigning = true;\n        esm_exports/* EventsController */.En.sendEvent({\n            event: 'CLICK_SIGN_SIWX_MESSAGE',\n            type: 'track',\n            properties: {\n                network: esm_exports/* ChainController */.WB.state.activeCaipNetwork?.caipNetworkId || '',\n                isSmartAccount: esm_exports/* AccountController */.Uj.state.preferredAccountType ===\n                    appkit_wallet_dist_esm/* W3mFrameRpcConstants */.Vl.ACCOUNT_TYPES.SMART_ACCOUNT\n            }\n        });\n        try {\n            SIWEController.setStatus('loading');\n            const session = await SIWEController.signIn();\n            SIWEController.setStatus('success');\n            esm_exports/* EventsController */.En.sendEvent({\n                event: 'SIWX_AUTH_SUCCESS',\n                type: 'track',\n                properties: {\n                    network: esm_exports/* ChainController */.WB.state.activeCaipNetwork?.caipNetworkId || '',\n                    isSmartAccount: esm_exports/* AccountController */.Uj.state.preferredAccountType ===\n                        appkit_wallet_dist_esm/* W3mFrameRpcConstants */.Vl.ACCOUNT_TYPES.SMART_ACCOUNT\n                }\n            });\n            return session;\n        }\n        catch (error) {\n            const preferredAccountType = esm_exports/* AccountController */.Uj.state.preferredAccountType;\n            const isSmartAccount = preferredAccountType === appkit_wallet_dist_esm/* W3mFrameRpcConstants */.Vl.ACCOUNT_TYPES.SMART_ACCOUNT;\n            if (isSmartAccount) {\n                esm_exports/* SnackController */.Pt.showError('This application might not support Smart Accounts');\n            }\n            else {\n                esm_exports/* SnackController */.Pt.showError('Signature declined');\n            }\n            SIWEController.setStatus('error');\n            return esm_exports/* EventsController */.En.sendEvent({\n                event: 'SIWX_AUTH_ERROR',\n                type: 'track',\n                properties: {\n                    network: esm_exports/* ChainController */.WB.state.activeCaipNetwork?.caipNetworkId || '',\n                    isSmartAccount\n                }\n            });\n        }\n        finally {\n            this.isSigning = false;\n        }\n    }\n    async onCancel() {\n        this.isCancelling = true;\n        const caipAddress = esm_exports/* ChainController */.WB.state.activeCaipAddress;\n        if (caipAddress) {\n            await esm_exports/* ConnectionController */.x4.disconnect();\n            esm_exports/* ModalController */.W3.close();\n        }\n        else {\n            esm_exports/* RouterController */.IN.push('Connect');\n        }\n        this.isCancelling = false;\n        esm_exports/* EventsController */.En.sendEvent({\n            event: 'CLICK_CANCEL_SIWX',\n            type: 'track',\n            properties: {\n                network: esm_exports/* ChainController */.WB.state.activeCaipNetwork?.caipNetworkId || '',\n                isSmartAccount: esm_exports/* AccountController */.Uj.state.preferredAccountType ===\n                    appkit_wallet_dist_esm/* W3mFrameRpcConstants */.Vl.ACCOUNT_TYPES.SMART_ACCOUNT\n            }\n        });\n    }\n};\nw3m_connecting_siwe_view_decorate([\n    (0,decorators/* state */.wk)()\n], W3mConnectingSiweView.prototype, \"isSigning\", void 0);\nw3m_connecting_siwe_view_decorate([\n    (0,decorators/* state */.wk)()\n], W3mConnectingSiweView.prototype, \"isCancelling\", void 0);\nW3mConnectingSiweView = w3m_connecting_siwe_view_decorate([\n    (0,dist_esm.customElement)('w3m-connecting-siwe-view')\n], W3mConnectingSiweView);\n\n//# sourceMappingURL=index.js.map\n;// CONCATENATED MODULE: ./node_modules/@reown/appkit-siwe/dist/esm/src/mapToSIWX.js\n\n\nfunction mapToSIWX(siwe) {\n    async function getSession() {\n        try {\n            return await siwe.methods.getSession();\n        }\n        catch (error) {\n            console.warn('AppKit:SIWE:getSession - error:', error);\n            return undefined;\n        }\n    }\n    esm_exports/* ChainController */.WB.subscribeKey('activeCaipNetwork', async (activeCaipNetwork) => {\n        if (!siwe.options.signOutOnNetworkChange) {\n            return;\n        }\n        const session = await getSession();\n        const isDiffernetNetwork = session &&\n            session.chainId !== esm/* NetworkUtil */.LX.caipNetworkIdToNumber(activeCaipNetwork?.caipNetworkId);\n        if (isDiffernetNetwork) {\n            await siwe.methods.signOut();\n        }\n    });\n    esm_exports/* ChainController */.WB.subscribeKey('activeCaipAddress', async (activeCaipAddress) => {\n        if (!siwe.options.signOutOnAccountChange) {\n            return;\n        }\n        const session = await getSession();\n        const isDifferentAddress = session && session.address !== esm_exports/* CoreHelperUtil */.wE.getPlainAddress(activeCaipAddress);\n        if (isDifferentAddress) {\n            await siwe.methods.signOut();\n        }\n    });\n    return {\n        async createMessage(input) {\n            const params = await siwe.methods.getMessageParams?.();\n            if (!params) {\n                throw new Error('Failed to get message params!');\n            }\n            const nonce = await siwe.getNonce(input.accountAddress);\n            const issuedAt = params.iat || new Date().toISOString();\n            const version = '1';\n            return {\n                nonce,\n                version,\n                requestId: params.requestId,\n                accountAddress: input.accountAddress,\n                chainId: input.chainId,\n                domain: params.domain,\n                uri: params.uri,\n                notBefore: params.nbf,\n                resources: params.resources,\n                statement: params.statement,\n                expirationTime: params.exp,\n                issuedAt,\n                toString: () => siwe.createMessage({\n                    ...params,\n                    chainId: esm/* NetworkUtil */.LX.caipNetworkIdToNumber(input.chainId) || 1,\n                    address: `did:pkh:${input.chainId}:${input.accountAddress}`,\n                    nonce,\n                    version,\n                    iat: issuedAt\n                })\n            };\n        },\n        async addSession(session) {\n            const chainId = esm/* NetworkUtil */.LX.parseEvmChainId(session.data.chainId);\n            if (!chainId) {\n                return Promise.resolve();\n            }\n            if (await siwe.methods.verifyMessage(session)) {\n                siwe.methods.onSignIn?.({\n                    address: session.data.accountAddress,\n                    chainId: esm/* NetworkUtil */.LX.parseEvmChainId(session.data.chainId)\n                });\n                return Promise.resolve();\n            }\n            throw new Error('Failed to add session');\n        },\n        async revokeSession(_chainId, _address) {\n            try {\n                await siwe.methods.signOut();\n                siwe.methods.onSignOut?.();\n            }\n            catch (error) {\n                console.warn('AppKit:SIWE:revokeSession - signOut error', error);\n            }\n        },\n        async setSessions(sessions) {\n            if (sessions.length === 0) {\n                try {\n                    await siwe.methods.signOut();\n                }\n                catch (error) {\n                    console.warn('AppKit:SIWE:setSessions - signOut error', error);\n                }\n            }\n            else {\n                const addingSessions = sessions.map(session => this.addSession(session));\n                await Promise.all(addingSessions);\n            }\n        },\n        async getSessions(chainId, address) {\n            try {\n                if (!chainId.startsWith('eip155:')) {\n                    return [\n                        {\n                            data: {\n                                accountAddress: address,\n                                chainId\n                            },\n                            message: '',\n                            signature: ''\n                        }\n                    ];\n                }\n                const siweSession = await getSession();\n                const siweCaipNetworkId = `eip155:${siweSession?.chainId}`;\n                if (!siweSession || siweSession.address !== address || siweCaipNetworkId !== chainId) {\n                    return [];\n                }\n                const session = {\n                    data: {\n                        accountAddress: siweSession.address,\n                        chainId: siweCaipNetworkId\n                    },\n                    message: '',\n                    signature: ''\n                };\n                return [session];\n            }\n            catch (error) {\n                console.warn('AppKit:SIWE:getSessions - error:', error);\n                return [];\n            }\n        }\n    };\n}\n//# sourceMappingURL=mapToSIWX.js.map\n;// CONCATENATED MODULE: ./node_modules/@reown/appkit-siwe/dist/esm/exports/index.js\n\n\n\n\n\nfunction createSIWEConfig(siweConfig) {\n    return new AppKitSIWEClient(siweConfig);\n}\n\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDL0I7QUFDa0U7QUFDRTtBQUNoQztBQUNwQyIsInNvdXJjZXMiOlsid2VicGFjazovL0BtZXRhbWFzay90ZXN0LWRhcHAvLi9ub2RlX21vZHVsZXMvQHJlb3duL2FwcGtpdC1zaXdlL2Rpc3QvZXNtL2NvcmUvY29udHJvbGxlci9TSVdFQ29udHJvbGxlci5qcz8yYjczIiwid2VicGFjazovL0BtZXRhbWFzay90ZXN0LWRhcHAvLi9ub2RlX21vZHVsZXMvQHJlb3duL2FwcGtpdC1zaXdlL2Rpc3QvZXNtL2NvcmUvdXRpbHMvQ29uc3RhbnRzVXRpbC5qcz8xMWJjIiwid2VicGFjazovL0BtZXRhbWFzay90ZXN0LWRhcHAvLi9ub2RlX21vZHVsZXMvQHJlb3duL2FwcGtpdC1zaXdlL2Rpc3QvZXNtL3NyYy9jbGllbnQuanM/ZmRmZSIsIndlYnBhY2s6Ly9AbWV0YW1hc2svdGVzdC1kYXBwLy4vbm9kZV9tb2R1bGVzL0ByZW93bi9hcHBraXQtc2l3ZS9kaXN0L2VzbS9jb3JlL2hlbHBlcnMvaW5kZXguanM/YWY0YiIsIndlYnBhY2s6Ly9AbWV0YW1hc2svdGVzdC1kYXBwLy4vbm9kZV9tb2R1bGVzL0ByZW93bi9hcHBraXQtc2l3ZS9kaXN0L2VzbS9zY2FmZm9sZC9wYXJ0aWFscy93M20tY29ubmVjdGluZy1zaXdlL3N0eWxlcy5qcz82ODEwIiwid2VicGFjazovL0BtZXRhbWFzay90ZXN0LWRhcHAvLi9ub2RlX21vZHVsZXMvQHJlb3duL2FwcGtpdC1zaXdlL2Rpc3QvZXNtL3NjYWZmb2xkL3BhcnRpYWxzL3czbS1jb25uZWN0aW5nLXNpd2UvaW5kZXguanM/ZTIyZCIsIndlYnBhY2s6Ly9AbWV0YW1hc2svdGVzdC1kYXBwLy4vbm9kZV9tb2R1bGVzL0ByZW93bi9hcHBraXQtc2l3ZS9kaXN0L2VzbS9zY2FmZm9sZC92aWV3cy93M20tY29ubmVjdGluZy1zaXdlLXZpZXcvaW5kZXguanM/NDFkZiIsIndlYnBhY2s6Ly9AbWV0YW1hc2svdGVzdC1kYXBwLy4vbm9kZV9tb2R1bGVzL0ByZW93bi9hcHBraXQtc2l3ZS9kaXN0L2VzbS9zcmMvbWFwVG9TSVdYLmpzPzE2ZTUiLCJ3ZWJwYWNrOi8vQG1ldGFtYXNrL3Rlc3QtZGFwcC8uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LXNpd2UvZGlzdC9lc20vZXhwb3J0cy9pbmRleC5qcz9hMWM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN1YnNjcmliZUtleSBhcyBzdWJLZXkgfSBmcm9tICd2YWx0aW8vdmFuaWxsYS91dGlscyc7XG5pbXBvcnQgeyBwcm94eSwgcmVmLCBzdWJzY3JpYmUgYXMgc3ViIH0gZnJvbSAndmFsdGlvL3ZhbmlsbGEnO1xuY29uc3Qgc3RhdGUgPSBwcm94eSh7XG4gICAgc3RhdHVzOiAndW5pbml0aWFsaXplZCdcbn0pO1xuZXhwb3J0IGNvbnN0IFNJV0VDb250cm9sbGVyID0ge1xuICAgIHN0YXRlLFxuICAgIHN1YnNjcmliZUtleShrZXksIGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBzdWJLZXkoc3RhdGUsIGtleSwgY2FsbGJhY2spO1xuICAgIH0sXG4gICAgc3Vic2NyaWJlKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBzdWIoc3RhdGUsICgpID0+IGNhbGxiYWNrKHN0YXRlKSk7XG4gICAgfSxcbiAgICBfZ2V0Q2xpZW50KCkge1xuICAgICAgICBpZiAoIXN0YXRlLl9jbGllbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU0lXRUNvbnRyb2xsZXIgY2xpZW50IG5vdCBzZXQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGUuX2NsaWVudDtcbiAgICB9LFxuICAgIGFzeW5jIGdldE5vbmNlKGFkZHJlc3MpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gdGhpcy5fZ2V0Q2xpZW50KCk7XG4gICAgICAgIGNvbnN0IG5vbmNlID0gYXdhaXQgY2xpZW50LmdldE5vbmNlKGFkZHJlc3MpO1xuICAgICAgICB0aGlzLnNldE5vbmNlKG5vbmNlKTtcbiAgICAgICAgcmV0dXJuIG5vbmNlO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0U2Vzc2lvbigpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudCA9IHRoaXMuX2dldENsaWVudCgpO1xuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGNsaWVudC5nZXRTZXNzaW9uKCk7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2Vzc2lvbihzZXNzaW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXR1cygnc3VjY2VzcycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlc3Npb24gfHwgdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNyZWF0ZU1lc3NhZ2UoYXJncykge1xuICAgICAgICBjb25zdCBjbGllbnQgPSB0aGlzLl9nZXRDbGllbnQoKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNsaWVudC5jcmVhdGVNZXNzYWdlKGFyZ3MpO1xuICAgICAgICB0aGlzLnNldE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgYXN5bmMgdmVyaWZ5TWVzc2FnZShhcmdzKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IHRoaXMuX2dldENsaWVudCgpO1xuICAgICAgICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgY2xpZW50LnZlcmlmeU1lc3NhZ2UoYXJncyk7XG4gICAgICAgIHJldHVybiBpc1ZhbGlkO1xuICAgIH0sXG4gICAgYXN5bmMgc2lnbkluKCkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSB0aGlzLl9nZXRDbGllbnQoKTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGNsaWVudC5zaWduSW4oKTtcbiAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfSxcbiAgICBhc3luYyBzaWduT3V0KCkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSB0aGlzLl9nZXRDbGllbnQoKTtcbiAgICAgICAgYXdhaXQgY2xpZW50LnNpZ25PdXQoKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0dXMoJ3JlYWR5Jyk7XG4gICAgICAgIHRoaXMuc2V0U2Vzc2lvbih1bmRlZmluZWQpO1xuICAgICAgICBjbGllbnQub25TaWduT3V0Py4oKTtcbiAgICB9LFxuICAgIG9uU2lnbkluKGFyZ3MpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gdGhpcy5fZ2V0Q2xpZW50KCk7XG4gICAgICAgIGNsaWVudC5vblNpZ25Jbj8uKGFyZ3MpO1xuICAgIH0sXG4gICAgb25TaWduT3V0KCkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSB0aGlzLl9nZXRDbGllbnQoKTtcbiAgICAgICAgY2xpZW50Lm9uU2lnbk91dD8uKCk7XG4gICAgfSxcbiAgICBhc3luYyBzZXRTSVdFQ2xpZW50KGNsaWVudCkge1xuICAgICAgICBzdGF0ZS5fY2xpZW50ID0gcmVmKGNsaWVudCk7XG4gICAgICAgIHN0YXRlLnNlc3Npb24gPSBhd2FpdCB0aGlzLmdldFNlc3Npb24oKTtcbiAgICAgICAgc3RhdGUuc3RhdHVzID0gc3RhdGUuc2Vzc2lvbiA/ICdzdWNjZXNzJyA6ICdyZWFkeSc7XG4gICAgfSxcbiAgICBzZXROb25jZShub25jZSkge1xuICAgICAgICBzdGF0ZS5ub25jZSA9IG5vbmNlO1xuICAgIH0sXG4gICAgc2V0U3RhdHVzKHN0YXR1cykge1xuICAgICAgICBzdGF0ZS5zdGF0dXMgPSBzdGF0dXM7XG4gICAgfSxcbiAgICBzZXRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgc3RhdGUubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfSxcbiAgICBzZXRTZXNzaW9uKHNlc3Npb24pIHtcbiAgICAgICAgc3RhdGUuc2Vzc2lvbiA9IHNlc3Npb247XG4gICAgICAgIHN0YXRlLnN0YXR1cyA9IHNlc3Npb24gPyAnc3VjY2VzcycgOiAncmVhZHknO1xuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TSVdFQ29udHJvbGxlci5qcy5tYXAiLCJleHBvcnQgY29uc3QgQ29uc3RhbnRzVXRpbCA9IHtcbiAgICBGSVZFX01JTlVURVNfSU5fTVM6IDMwMDAwMFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnN0YW50c1V0aWwuanMubWFwIiwiaW1wb3J0IHsgU0lXRUNvbnRyb2xsZXIgfSBmcm9tICcuLi9jb3JlL2NvbnRyb2xsZXIvU0lXRUNvbnRyb2xsZXIuanMnO1xuaW1wb3J0IHsgQ2hhaW5Db250cm9sbGVyLCBDb25uZWN0aW9uQ29udHJvbGxlciwgUm91dGVyQ29udHJvbGxlciwgU3RvcmFnZVV0aWwsIE1vZGFsQ29udHJvbGxlciwgQ29yZUhlbHBlclV0aWwgfSBmcm9tICdAcmVvd24vYXBwa2l0LWNvcmUnO1xuaW1wb3J0IHt9IGZyb20gJ0ByZW93bi9hcHBraXQtY29tbW9uJztcbmltcG9ydCB7IENvbnN0YW50c1V0aWwgfSBmcm9tICcuLi9jb3JlL3V0aWxzL0NvbnN0YW50c1V0aWwuanMnO1xuZXhwb3J0IGNsYXNzIEFwcEtpdFNJV0VDbGllbnQge1xuICAgIGNvbnN0cnVjdG9yKHNpd2VDb25maWcpIHtcbiAgICAgICAgY29uc3QgeyBlbmFibGVkID0gdHJ1ZSwgbm9uY2VSZWZldGNoSW50ZXJ2YWxNcyA9IENvbnN0YW50c1V0aWwuRklWRV9NSU5VVEVTX0lOX01TLCBzZXNzaW9uUmVmZXRjaEludGVydmFsTXMgPSBDb25zdGFudHNVdGlsLkZJVkVfTUlOVVRFU19JTl9NUywgc2lnbk91dE9uQWNjb3VudENoYW5nZSA9IHRydWUsIHNpZ25PdXRPbkRpc2Nvbm5lY3QgPSB0cnVlLCBzaWduT3V0T25OZXR3b3JrQ2hhbmdlID0gdHJ1ZSwgLi4uc2l3ZUNvbmZpZ01ldGhvZHMgfSA9IHNpd2VDb25maWc7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGVuYWJsZWQsXG4gICAgICAgICAgICBub25jZVJlZmV0Y2hJbnRlcnZhbE1zLFxuICAgICAgICAgICAgc2Vzc2lvblJlZmV0Y2hJbnRlcnZhbE1zLFxuICAgICAgICAgICAgc2lnbk91dE9uRGlzY29ubmVjdCxcbiAgICAgICAgICAgIHNpZ25PdXRPbkFjY291bnRDaGFuZ2UsXG4gICAgICAgICAgICBzaWduT3V0T25OZXR3b3JrQ2hhbmdlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubWV0aG9kcyA9IHNpd2VDb25maWdNZXRob2RzO1xuICAgIH1cbiAgICBhc3luYyBnZXROb25jZShhZGRyZXNzKSB7XG4gICAgICAgIGNvbnN0IG5vbmNlID0gYXdhaXQgdGhpcy5tZXRob2RzLmdldE5vbmNlKGFkZHJlc3MpO1xuICAgICAgICBpZiAoIW5vbmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Npd2VDb250cm9sbGVyQ2xpZW50OmdldE5vbmNlIC0gbm9uY2UgaXMgdW5kZWZpbmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vbmNlO1xuICAgIH1cbiAgICBhc3luYyBnZXRNZXNzYWdlUGFyYW1zKCkge1xuICAgICAgICByZXR1cm4gKChhd2FpdCB0aGlzLm1ldGhvZHMuZ2V0TWVzc2FnZVBhcmFtcz8uKCkpIHx8IHt9KTtcbiAgICB9XG4gICAgY3JlYXRlTWVzc2FnZShhcmdzKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLm1ldGhvZHMuY3JlYXRlTWVzc2FnZShhcmdzKTtcbiAgICAgICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Npd2VDb250cm9sbGVyQ2xpZW50OmNyZWF0ZU1lc3NhZ2UgLSBtZXNzYWdlIGlzIHVuZGVmaW5lZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH1cbiAgICBhc3luYyB2ZXJpZnlNZXNzYWdlKGFyZ3MpIHtcbiAgICAgICAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IHRoaXMubWV0aG9kcy52ZXJpZnlNZXNzYWdlKGFyZ3MpO1xuICAgICAgICByZXR1cm4gaXNWYWxpZDtcbiAgICB9XG4gICAgYXN5bmMgZ2V0U2Vzc2lvbigpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMubWV0aG9kcy5nZXRTZXNzaW9uKCk7XG4gICAgICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzaXdlQ29udHJvbGxlckNsaWVudDpnZXRTZXNzaW9uIC0gc2Vzc2lvbiBpcyB1bmRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9XG4gICAgYXN5bmMgc2lnbkluKCkge1xuICAgICAgICBpZiAoIVNJV0VDb250cm9sbGVyLnN0YXRlLl9jbGllbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU0lXRSBjbGllbnQgbmVlZHMgdG8gYmUgaW5pdGlhbGl6ZWQgYmVmb3JlIGNhbGxpbmcgc2lnbkluJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FpcEFkZHJlc3MgPSBDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2FpcEFkZHJlc3M7XG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSBjYWlwQWRkcmVzcyA/IENvcmVIZWxwZXJVdGlsLmdldFBsYWluQWRkcmVzcyhjYWlwQWRkcmVzcykgOiAnJztcbiAgICAgICAgY29uc3Qgbm9uY2UgPSBhd2FpdCB0aGlzLm1ldGhvZHMuZ2V0Tm9uY2UoYWRkcmVzcyk7XG4gICAgICAgIGlmICghYWRkcmVzcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBbiBhZGRyZXNzIGlzIHJlcXVpcmVkIHRvIGNyZWF0ZSBhIFNJV0UgbWVzc2FnZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYWlwTmV0d29yayA9IENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDYWlwTmV0d29yaztcbiAgICAgICAgaWYgKCFjYWlwTmV0d29yaz8uaWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQSBjaGFpbklkIGlzIHJlcXVpcmVkIHRvIGNyZWF0ZSBhIFNJV0UgbWVzc2FnZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGFpbklkID0gY2FpcE5ldHdvcmsuaWQ7XG4gICAgICAgIGlmICghY2hhaW5JZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBIGNoYWluSWQgaXMgcmVxdWlyZWQgdG8gY3JlYXRlIGEgU0lXRSBtZXNzYWdlLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpZ25PdXRPbk5ldHdvcmtDaGFuZ2UgPSBTSVdFQ29udHJvbGxlci5zdGF0ZS5fY2xpZW50Py5vcHRpb25zLnNpZ25PdXRPbk5ldHdvcmtDaGFuZ2U7XG4gICAgICAgIGlmIChzaWduT3V0T25OZXR3b3JrQ2hhbmdlKSB7XG4gICAgICAgICAgICBTSVdFQ29udHJvbGxlci5zdGF0ZS5fY2xpZW50Lm9wdGlvbnMuc2lnbk91dE9uTmV0d29ya0NoYW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zaWduT3V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNpZ25PdXRPbk5ldHdvcmtDaGFuZ2UpIHtcbiAgICAgICAgICAgIFNJV0VDb250cm9sbGVyLnN0YXRlLl9jbGllbnQub3B0aW9ucy5zaWduT3V0T25OZXR3b3JrQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXNzYWdlUGFyYW1zID0gYXdhaXQgdGhpcy5nZXRNZXNzYWdlUGFyYW1zPy4oKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMubWV0aG9kcy5jcmVhdGVNZXNzYWdlKHtcbiAgICAgICAgICAgIGFkZHJlc3M6IGNhaXBBZGRyZXNzLFxuICAgICAgICAgICAgY2hhaW5JZDogTnVtYmVyKGNoYWluSWQpLFxuICAgICAgICAgICAgbm9uY2UsXG4gICAgICAgICAgICB2ZXJzaW9uOiAnMScsXG4gICAgICAgICAgICBpYXQ6IG1lc3NhZ2VQYXJhbXM/LmlhdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAuLi5tZXNzYWdlUGFyYW1zXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0eXBlID0gU3RvcmFnZVV0aWwuZ2V0Q29ubmVjdGVkQ29ubmVjdG9yKCk7XG4gICAgICAgIGlmICh0eXBlID09PSAnSURfQVVUSCcpIHtcbiAgICAgICAgICAgIFJvdXRlckNvbnRyb2xsZXIucHVzaFRyYW5zYWN0aW9uU3RhY2soe1xuICAgICAgICAgICAgICAgIHZpZXc6IG51bGwsXG4gICAgICAgICAgICAgICAgZ29CYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICAgICAgICAgIG9uU3VjY2VzcygpIHtcbiAgICAgICAgICAgICAgICAgICAgTW9kYWxDb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2lnbmF0dXJlID0gYXdhaXQgQ29ubmVjdGlvbkNvbnRyb2xsZXIuc2lnbk1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB0aGlzLm1ldGhvZHMudmVyaWZ5TWVzc2FnZSh7IG1lc3NhZ2UsIHNpZ25hdHVyZTogc2lnbmF0dXJlIH0pO1xuICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgdmVyaWZ5aW5nIFNJV0Ugc2lnbmF0dXJlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMubWV0aG9kcy5nZXRTZXNzaW9uKCk7XG4gICAgICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciB2ZXJpZnlpbmcgU0lXRSBzaWduYXR1cmUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tZXRob2RzLm9uU2lnbkluKSB7XG4gICAgICAgICAgICB0aGlzLm1ldGhvZHMub25TaWduSW4oc2Vzc2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfVxuICAgIGFzeW5jIHNpZ25PdXQoKSB7XG4gICAgICAgIHRoaXMubWV0aG9kcy5vblNpZ25PdXQ/LigpO1xuICAgICAgICByZXR1cm4gdGhpcy5tZXRob2RzLnNpZ25PdXQoKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQuanMubWFwIiwiaW1wb3J0IHsgaXNWYWxpZEVpcDE5MVNpZ25hdHVyZSwgaXNWYWxpZEVpcDEyNzFTaWduYXR1cmUgfSBmcm9tICdAd2FsbGV0Y29ubmVjdC91dGlscyc7XG5jb25zdCBFVEhfQUREUkVTU19QQVRURVJOID0gLzB4W2EtZkEtRjAtOV17NDB9L3U7XG5jb25zdCBFVEhfQ0hBSU5fSURfSU5fU0lXRV9QQVRURVJOID0gL0NoYWluIElEOiAoPzx0ZW1wMT5cXGQrKS91O1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFkZHJlc3NGcm9tTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgcmV0dXJuIG1lc3NhZ2UubWF0Y2goRVRIX0FERFJFU1NfUEFUVEVSTik/LlswXSB8fCAnJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRDaGFpbklkRnJvbU1lc3NhZ2UobWVzc2FnZSkge1xuICAgIHJldHVybiBgZWlwMTU1OiR7bWVzc2FnZS5tYXRjaChFVEhfQ0hBSU5fSURfSU5fU0lXRV9QQVRURVJOKT8uWzFdIHx8IDF9YDtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlTaWduYXR1cmUoeyBhZGRyZXNzLCBtZXNzYWdlLCBzaWduYXR1cmUsIGNoYWluSWQsIHByb2plY3RJZCB9KSB7XG4gICAgbGV0IGlzVmFsaWQgPSBpc1ZhbGlkRWlwMTkxU2lnbmF0dXJlKGFkZHJlc3MsIG1lc3NhZ2UsIHNpZ25hdHVyZSk7XG4gICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgIGlzVmFsaWQgPSBhd2FpdCBpc1ZhbGlkRWlwMTI3MVNpZ25hdHVyZShhZGRyZXNzLCBtZXNzYWdlLCBzaWduYXR1cmUsIGNoYWluSWQsIHByb2plY3RJZCk7XG4gICAgfVxuICAgIHJldHVybiBpc1ZhbGlkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IHsgY3NzIH0gZnJvbSAnbGl0JztcbmV4cG9ydCBkZWZhdWx0IGNzcyBgXG4gIDpob3N0IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGdhcDogdmFyKC0td3VpLXNwYWNpbmctMnhsKTtcbiAgfVxuXG4gIHd1aS12aXN1YWwtdGh1bWJuYWlsOm50aC1jaGlsZCgxKSB7XG4gICAgei1pbmRleDogMTtcbiAgfVxuYDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0eWxlcy5qcy5tYXAiLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBjdXN0b21FbGVtZW50IH0gZnJvbSAnQHJlb3duL2FwcGtpdC11aSc7XG5pbXBvcnQgeyBMaXRFbGVtZW50LCBodG1sIH0gZnJvbSAnbGl0JztcbmltcG9ydCBzdHlsZXMgZnJvbSAnLi9zdHlsZXMuanMnO1xuaW1wb3J0IHsgQWNjb3VudENvbnRyb2xsZXIsIE9wdGlvbnNDb250cm9sbGVyIH0gZnJvbSAnQHJlb3duL2FwcGtpdC1jb3JlJztcbmxldCBXM21Db25uZWN0aW5nU2l3ZSA9IGNsYXNzIFczbUNvbm5lY3RpbmdTaXdlIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuZGFwcEltYWdlVXJsID0gT3B0aW9uc0NvbnRyb2xsZXIuc3RhdGUubWV0YWRhdGE/Lmljb25zO1xuICAgICAgICB0aGlzLndhbGxldEltYWdlVXJsID0gQWNjb3VudENvbnRyb2xsZXIuc3RhdGUuY29ubmVjdGVkV2FsbGV0SW5mbz8uaWNvbjtcbiAgICB9XG4gICAgZmlyc3RVcGRhdGVkKCkge1xuICAgICAgICBjb25zdCB2aXN1YWxzID0gdGhpcy5zaGFkb3dSb290Py5xdWVyeVNlbGVjdG9yQWxsKCd3dWktdmlzdWFsLXRodW1ibmFpbCcpO1xuICAgICAgICBpZiAodmlzdWFscz8uWzBdKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUFuaW1hdGlvbih2aXN1YWxzWzBdLCAndHJhbnNsYXRlKDE4cHgpJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZpc3VhbHM/LlsxXSkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVBbmltYXRpb24odmlzdWFsc1sxXSwgJ3RyYW5zbGF0ZSgtMThweCknKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiBodG1sIGBcbiAgICAgIDx3dWktdmlzdWFsLXRodW1ibmFpbFxuICAgICAgICA/Ym9yZGVyUmFkaXVzRnVsbD0ke3RydWV9XG4gICAgICAgIC5pbWFnZVNyYz0ke3RoaXMuZGFwcEltYWdlVXJsPy5bMF19XG4gICAgICA+PC93dWktdmlzdWFsLXRodW1ibmFpbD5cbiAgICAgIDx3dWktdmlzdWFsLXRodW1ibmFpbCAuaW1hZ2VTcmM9JHt0aGlzLndhbGxldEltYWdlVXJsfT48L3d1aS12aXN1YWwtdGh1bWJuYWlsPlxuICAgIGA7XG4gICAgfVxuICAgIGNyZWF0ZUFuaW1hdGlvbihlbGVtZW50LCB0cmFuc2xhdGlvbikge1xuICAgICAgICBlbGVtZW50LmFuaW1hdGUoW3sgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgwcHgpJyB9LCB7IHRyYW5zZm9ybTogdHJhbnNsYXRpb24gfV0sIHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxNjAwLFxuICAgICAgICAgICAgZWFzaW5nOiAnY3ViaWMtYmV6aWVyKDAuNTYsIDAsIDAuNDgsIDEpJyxcbiAgICAgICAgICAgIGRpcmVjdGlvbjogJ2FsdGVybmF0ZScsXG4gICAgICAgICAgICBpdGVyYXRpb25zOiBJbmZpbml0eVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuVzNtQ29ubmVjdGluZ1Npd2Uuc3R5bGVzID0gc3R5bGVzO1xuVzNtQ29ubmVjdGluZ1Npd2UgPSBfX2RlY29yYXRlKFtcbiAgICBjdXN0b21FbGVtZW50KCd3M20tY29ubmVjdGluZy1zaXdlJylcbl0sIFczbUNvbm5lY3RpbmdTaXdlKTtcbmV4cG9ydCB7IFczbUNvbm5lY3RpbmdTaXdlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBBY2NvdW50Q29udHJvbGxlciwgQ2hhaW5Db250cm9sbGVyLCBDb25uZWN0aW9uQ29udHJvbGxlciwgRXZlbnRzQ29udHJvbGxlciwgTW9kYWxDb250cm9sbGVyLCBPcHRpb25zQ29udHJvbGxlciwgUm91dGVyQ29udHJvbGxlciwgU25hY2tDb250cm9sbGVyIH0gZnJvbSAnQHJlb3duL2FwcGtpdC1jb3JlJztcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQgfSBmcm9tICdAcmVvd24vYXBwa2l0LXVpJztcbmltcG9ydCB7IExpdEVsZW1lbnQsIGh0bWwgfSBmcm9tICdsaXQnO1xuaW1wb3J0IHsgc3RhdGUgfSBmcm9tICdsaXQvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyBTSVdFQ29udHJvbGxlciB9IGZyb20gJy4uLy4uLy4uL2NvcmUvY29udHJvbGxlci9TSVdFQ29udHJvbGxlci5qcyc7XG5pbXBvcnQgeyBXM21GcmFtZVJwY0NvbnN0YW50cyB9IGZyb20gJ0ByZW93bi9hcHBraXQtd2FsbGV0JztcbmxldCBXM21Db25uZWN0aW5nU2l3ZVZpZXcgPSBjbGFzcyBXM21Db25uZWN0aW5nU2l3ZVZpZXcgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5kYXBwTmFtZSA9IE9wdGlvbnNDb250cm9sbGVyLnN0YXRlLm1ldGFkYXRhPy5uYW1lO1xuICAgICAgICB0aGlzLmlzU2lnbmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzQ2FuY2VsbGluZyA9IGZhbHNlO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiBodG1sIGBcbiAgICAgIDx3dWktZmxleCBqdXN0aWZ5Q29udGVudD1cImNlbnRlclwiIC5wYWRkaW5nPSR7WycyeGwnLCAnMCcsICd4eGwnLCAnMCddfT5cbiAgICAgICAgPHczbS1jb25uZWN0aW5nLXNpd2U+PC93M20tY29ubmVjdGluZy1zaXdlPlxuICAgICAgPC93dWktZmxleD5cbiAgICAgIDx3dWktZmxleFxuICAgICAgICAucGFkZGluZz0ke1snMCcsICc0eGwnLCAnbCcsICc0eGwnXX1cbiAgICAgICAgZ2FwPVwic1wiXG4gICAgICAgIGp1c3RpZnlDb250ZW50PVwic3BhY2UtYmV0d2VlblwiXG4gICAgICA+XG4gICAgICAgIDx3dWktdGV4dCB2YXJpYW50PVwicGFyYWdyYXBoLTUwMFwiIGFsaWduPVwiY2VudGVyXCIgY29sb3I9XCJmZy0xMDBcIlxuICAgICAgICAgID4ke3RoaXMuZGFwcE5hbWUgPz8gJ0RhcHAnfSBuZWVkcyB0byBjb25uZWN0IHRvIHlvdXIgd2FsbGV0PC93dWktdGV4dFxuICAgICAgICA+XG4gICAgICA8L3d1aS1mbGV4PlxuICAgICAgPHd1aS1mbGV4XG4gICAgICAgIC5wYWRkaW5nPSR7WycwJywgJzN4bCcsICdsJywgJzN4bCddfVxuICAgICAgICBnYXA9XCJzXCJcbiAgICAgICAganVzdGlmeUNvbnRlbnQ9XCJzcGFjZS1iZXR3ZWVuXCJcbiAgICAgID5cbiAgICAgICAgPHd1aS10ZXh0IHZhcmlhbnQ9XCJzbWFsbC00MDBcIiBhbGlnbj1cImNlbnRlclwiIGNvbG9yPVwiZmctMjAwXCJcbiAgICAgICAgICA+U2lnbiB0aGlzIG1lc3NhZ2UgdG8gcHJvdmUgeW91IG93biB0aGlzIHdhbGxldCBhbmQgcHJvY2VlZC4gQ2FuY2VsaW5nIHdpbGwgZGlzY29ubmVjdFxuICAgICAgICAgIHlvdS48L3d1aS10ZXh0XG4gICAgICAgID5cbiAgICAgIDwvd3VpLWZsZXg+XG4gICAgICA8d3VpLWZsZXggLnBhZGRpbmc9JHtbJ2wnLCAneGwnLCAneGwnLCAneGwnXX0gZ2FwPVwic1wiIGp1c3RpZnlDb250ZW50PVwic3BhY2UtYmV0d2VlblwiPlxuICAgICAgICA8d3VpLWJ1dHRvblxuICAgICAgICAgIHNpemU9XCJsZ1wiXG4gICAgICAgICAgYm9yZGVyUmFkaXVzPVwieHNcIlxuICAgICAgICAgIGZ1bGxXaWR0aFxuICAgICAgICAgIHZhcmlhbnQ9XCJuZXV0cmFsXCJcbiAgICAgICAgICA/bG9hZGluZz0ke3RoaXMuaXNDYW5jZWxsaW5nfVxuICAgICAgICAgIEBjbGljaz0ke3RoaXMub25DYW5jZWwuYmluZCh0aGlzKX1cbiAgICAgICAgICBkYXRhLXRlc3RpZD1cInczbS1jb25uZWN0aW5nLXNpd2UtY2FuY2VsXCJcbiAgICAgICAgPlxuICAgICAgICAgIENhbmNlbFxuICAgICAgICA8L3d1aS1idXR0b24+XG4gICAgICAgIDx3dWktYnV0dG9uXG4gICAgICAgICAgc2l6ZT1cImxnXCJcbiAgICAgICAgICBib3JkZXJSYWRpdXM9XCJ4c1wiXG4gICAgICAgICAgZnVsbFdpZHRoXG4gICAgICAgICAgdmFyaWFudD1cIm1haW5cIlxuICAgICAgICAgIEBjbGljaz0ke3RoaXMub25TaWduLmJpbmQodGhpcyl9XG4gICAgICAgICAgP2xvYWRpbmc9JHt0aGlzLmlzU2lnbmluZ31cbiAgICAgICAgICBkYXRhLXRlc3RpZD1cInczbS1jb25uZWN0aW5nLXNpd2Utc2lnblwiXG4gICAgICAgID5cbiAgICAgICAgICAke3RoaXMuaXNTaWduaW5nID8gJ1NpZ25pbmcuLi4nIDogJ1NpZ24nfVxuICAgICAgICA8L3d1aS1idXR0b24+XG4gICAgICA8L3d1aS1mbGV4PlxuICAgIGA7XG4gICAgfVxuICAgIGFzeW5jIG9uU2lnbigpIHtcbiAgICAgICAgdGhpcy5pc1NpZ25pbmcgPSB0cnVlO1xuICAgICAgICBFdmVudHNDb250cm9sbGVyLnNlbmRFdmVudCh7XG4gICAgICAgICAgICBldmVudDogJ0NMSUNLX1NJR05fU0lXWF9NRVNTQUdFJyxcbiAgICAgICAgICAgIHR5cGU6ICd0cmFjaycsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgbmV0d29yazogQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNhaXBOZXR3b3JrPy5jYWlwTmV0d29ya0lkIHx8ICcnLFxuICAgICAgICAgICAgICAgIGlzU21hcnRBY2NvdW50OiBBY2NvdW50Q29udHJvbGxlci5zdGF0ZS5wcmVmZXJyZWRBY2NvdW50VHlwZSA9PT1cbiAgICAgICAgICAgICAgICAgICAgVzNtRnJhbWVScGNDb25zdGFudHMuQUNDT1VOVF9UWVBFUy5TTUFSVF9BQ0NPVU5UXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgU0lXRUNvbnRyb2xsZXIuc2V0U3RhdHVzKCdsb2FkaW5nJyk7XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgU0lXRUNvbnRyb2xsZXIuc2lnbkluKCk7XG4gICAgICAgICAgICBTSVdFQ29udHJvbGxlci5zZXRTdGF0dXMoJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgIEV2ZW50c0NvbnRyb2xsZXIuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICBldmVudDogJ1NJV1hfQVVUSF9TVUNDRVNTJyxcbiAgICAgICAgICAgICAgICB0eXBlOiAndHJhY2snLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgbmV0d29yazogQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNhaXBOZXR3b3JrPy5jYWlwTmV0d29ya0lkIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICBpc1NtYXJ0QWNjb3VudDogQWNjb3VudENvbnRyb2xsZXIuc3RhdGUucHJlZmVycmVkQWNjb3VudFR5cGUgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBXM21GcmFtZVJwY0NvbnN0YW50cy5BQ0NPVU5UX1RZUEVTLlNNQVJUX0FDQ09VTlRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgcHJlZmVycmVkQWNjb3VudFR5cGUgPSBBY2NvdW50Q29udHJvbGxlci5zdGF0ZS5wcmVmZXJyZWRBY2NvdW50VHlwZTtcbiAgICAgICAgICAgIGNvbnN0IGlzU21hcnRBY2NvdW50ID0gcHJlZmVycmVkQWNjb3VudFR5cGUgPT09IFczbUZyYW1lUnBjQ29uc3RhbnRzLkFDQ09VTlRfVFlQRVMuU01BUlRfQUNDT1VOVDtcbiAgICAgICAgICAgIGlmIChpc1NtYXJ0QWNjb3VudCkge1xuICAgICAgICAgICAgICAgIFNuYWNrQ29udHJvbGxlci5zaG93RXJyb3IoJ1RoaXMgYXBwbGljYXRpb24gbWlnaHQgbm90IHN1cHBvcnQgU21hcnQgQWNjb3VudHMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIFNuYWNrQ29udHJvbGxlci5zaG93RXJyb3IoJ1NpZ25hdHVyZSBkZWNsaW5lZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgU0lXRUNvbnRyb2xsZXIuc2V0U3RhdHVzKCdlcnJvcicpO1xuICAgICAgICAgICAgcmV0dXJuIEV2ZW50c0NvbnRyb2xsZXIuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICBldmVudDogJ1NJV1hfQVVUSF9FUlJPUicsXG4gICAgICAgICAgICAgICAgdHlwZTogJ3RyYWNrJyxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIG5ldHdvcms6IENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDYWlwTmV0d29yaz8uY2FpcE5ldHdvcmtJZCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgaXNTbWFydEFjY291bnRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuaXNTaWduaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25DYW5jZWwoKSB7XG4gICAgICAgIHRoaXMuaXNDYW5jZWxsaW5nID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgY2FpcEFkZHJlc3MgPSBDaGFpbkNvbnRyb2xsZXIuc3RhdGUuYWN0aXZlQ2FpcEFkZHJlc3M7XG4gICAgICAgIGlmIChjYWlwQWRkcmVzcykge1xuICAgICAgICAgICAgYXdhaXQgQ29ubmVjdGlvbkNvbnRyb2xsZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgTW9kYWxDb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBSb3V0ZXJDb250cm9sbGVyLnB1c2goJ0Nvbm5lY3QnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzQ2FuY2VsbGluZyA9IGZhbHNlO1xuICAgICAgICBFdmVudHNDb250cm9sbGVyLnNlbmRFdmVudCh7XG4gICAgICAgICAgICBldmVudDogJ0NMSUNLX0NBTkNFTF9TSVdYJyxcbiAgICAgICAgICAgIHR5cGU6ICd0cmFjaycsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgbmV0d29yazogQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNhaXBOZXR3b3JrPy5jYWlwTmV0d29ya0lkIHx8ICcnLFxuICAgICAgICAgICAgICAgIGlzU21hcnRBY2NvdW50OiBBY2NvdW50Q29udHJvbGxlci5zdGF0ZS5wcmVmZXJyZWRBY2NvdW50VHlwZSA9PT1cbiAgICAgICAgICAgICAgICAgICAgVzNtRnJhbWVScGNDb25zdGFudHMuQUNDT1VOVF9UWVBFUy5TTUFSVF9BQ0NPVU5UXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBzdGF0ZSgpXG5dLCBXM21Db25uZWN0aW5nU2l3ZVZpZXcucHJvdG90eXBlLCBcImlzU2lnbmluZ1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgc3RhdGUoKVxuXSwgVzNtQ29ubmVjdGluZ1Npd2VWaWV3LnByb3RvdHlwZSwgXCJpc0NhbmNlbGxpbmdcIiwgdm9pZCAwKTtcblczbUNvbm5lY3RpbmdTaXdlVmlldyA9IF9fZGVjb3JhdGUoW1xuICAgIGN1c3RvbUVsZW1lbnQoJ3czbS1jb25uZWN0aW5nLXNpd2UtdmlldycpXG5dLCBXM21Db25uZWN0aW5nU2l3ZVZpZXcpO1xuZXhwb3J0IHsgVzNtQ29ubmVjdGluZ1Npd2VWaWV3IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgeyBDaGFpbkNvbnRyb2xsZXIsIENvcmVIZWxwZXJVdGlsIH0gZnJvbSAnQHJlb3duL2FwcGtpdC1jb3JlJztcbmltcG9ydCB7IE5ldHdvcmtVdGlsIH0gZnJvbSAnQHJlb3duL2FwcGtpdC1jb21tb24nO1xuZXhwb3J0IGZ1bmN0aW9uIG1hcFRvU0lXWChzaXdlKSB7XG4gICAgYXN5bmMgZnVuY3Rpb24gZ2V0U2Vzc2lvbigpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzaXdlLm1ldGhvZHMuZ2V0U2Vzc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdBcHBLaXQ6U0lXRTpnZXRTZXNzaW9uIC0gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBDaGFpbkNvbnRyb2xsZXIuc3Vic2NyaWJlS2V5KCdhY3RpdmVDYWlwTmV0d29yaycsIGFzeW5jIChhY3RpdmVDYWlwTmV0d29yaykgPT4ge1xuICAgICAgICBpZiAoIXNpd2Uub3B0aW9ucy5zaWduT3V0T25OZXR3b3JrQ2hhbmdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24oKTtcbiAgICAgICAgY29uc3QgaXNEaWZmZXJuZXROZXR3b3JrID0gc2Vzc2lvbiAmJlxuICAgICAgICAgICAgc2Vzc2lvbi5jaGFpbklkICE9PSBOZXR3b3JrVXRpbC5jYWlwTmV0d29ya0lkVG9OdW1iZXIoYWN0aXZlQ2FpcE5ldHdvcms/LmNhaXBOZXR3b3JrSWQpO1xuICAgICAgICBpZiAoaXNEaWZmZXJuZXROZXR3b3JrKSB7XG4gICAgICAgICAgICBhd2FpdCBzaXdlLm1ldGhvZHMuc2lnbk91dCgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgQ2hhaW5Db250cm9sbGVyLnN1YnNjcmliZUtleSgnYWN0aXZlQ2FpcEFkZHJlc3MnLCBhc3luYyAoYWN0aXZlQ2FpcEFkZHJlc3MpID0+IHtcbiAgICAgICAgaWYgKCFzaXdlLm9wdGlvbnMuc2lnbk91dE9uQWNjb3VudENoYW5nZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKCk7XG4gICAgICAgIGNvbnN0IGlzRGlmZmVyZW50QWRkcmVzcyA9IHNlc3Npb24gJiYgc2Vzc2lvbi5hZGRyZXNzICE9PSBDb3JlSGVscGVyVXRpbC5nZXRQbGFpbkFkZHJlc3MoYWN0aXZlQ2FpcEFkZHJlc3MpO1xuICAgICAgICBpZiAoaXNEaWZmZXJlbnRBZGRyZXNzKSB7XG4gICAgICAgICAgICBhd2FpdCBzaXdlLm1ldGhvZHMuc2lnbk91dCgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXN5bmMgY3JlYXRlTWVzc2FnZShpbnB1dCkge1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gYXdhaXQgc2l3ZS5tZXRob2RzLmdldE1lc3NhZ2VQYXJhbXM/LigpO1xuICAgICAgICAgICAgaWYgKCFwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZXQgbWVzc2FnZSBwYXJhbXMhJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBub25jZSA9IGF3YWl0IHNpd2UuZ2V0Tm9uY2UoaW5wdXQuYWNjb3VudEFkZHJlc3MpO1xuICAgICAgICAgICAgY29uc3QgaXNzdWVkQXQgPSBwYXJhbXMuaWF0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb24gPSAnMSc7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5vbmNlLFxuICAgICAgICAgICAgICAgIHZlcnNpb24sXG4gICAgICAgICAgICAgICAgcmVxdWVzdElkOiBwYXJhbXMucmVxdWVzdElkLFxuICAgICAgICAgICAgICAgIGFjY291bnRBZGRyZXNzOiBpbnB1dC5hY2NvdW50QWRkcmVzcyxcbiAgICAgICAgICAgICAgICBjaGFpbklkOiBpbnB1dC5jaGFpbklkLFxuICAgICAgICAgICAgICAgIGRvbWFpbjogcGFyYW1zLmRvbWFpbixcbiAgICAgICAgICAgICAgICB1cmk6IHBhcmFtcy51cmksXG4gICAgICAgICAgICAgICAgbm90QmVmb3JlOiBwYXJhbXMubmJmLFxuICAgICAgICAgICAgICAgIHJlc291cmNlczogcGFyYW1zLnJlc291cmNlcyxcbiAgICAgICAgICAgICAgICBzdGF0ZW1lbnQ6IHBhcmFtcy5zdGF0ZW1lbnQsXG4gICAgICAgICAgICAgICAgZXhwaXJhdGlvblRpbWU6IHBhcmFtcy5leHAsXG4gICAgICAgICAgICAgICAgaXNzdWVkQXQsXG4gICAgICAgICAgICAgICAgdG9TdHJpbmc6ICgpID0+IHNpd2UuY3JlYXRlTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogTmV0d29ya1V0aWwuY2FpcE5ldHdvcmtJZFRvTnVtYmVyKGlucHV0LmNoYWluSWQpIHx8IDEsXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGBkaWQ6cGtoOiR7aW5wdXQuY2hhaW5JZH06JHtpbnB1dC5hY2NvdW50QWRkcmVzc31gLFxuICAgICAgICAgICAgICAgICAgICBub25jZSxcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgaWF0OiBpc3N1ZWRBdFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBhZGRTZXNzaW9uKHNlc3Npb24pIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYWluSWQgPSBOZXR3b3JrVXRpbC5wYXJzZUV2bUNoYWluSWQoc2Vzc2lvbi5kYXRhLmNoYWluSWQpO1xuICAgICAgICAgICAgaWYgKCFjaGFpbklkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGF3YWl0IHNpd2UubWV0aG9kcy52ZXJpZnlNZXNzYWdlKHNlc3Npb24pKSB7XG4gICAgICAgICAgICAgICAgc2l3ZS5tZXRob2RzLm9uU2lnbkluPy4oe1xuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiBzZXNzaW9uLmRhdGEuYWNjb3VudEFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IE5ldHdvcmtVdGlsLnBhcnNlRXZtQ2hhaW5JZChzZXNzaW9uLmRhdGEuY2hhaW5JZClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBhZGQgc2Vzc2lvbicpO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyByZXZva2VTZXNzaW9uKF9jaGFpbklkLCBfYWRkcmVzcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzaXdlLm1ldGhvZHMuc2lnbk91dCgpO1xuICAgICAgICAgICAgICAgIHNpd2UubWV0aG9kcy5vblNpZ25PdXQ/LigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdBcHBLaXQ6U0lXRTpyZXZva2VTZXNzaW9uIC0gc2lnbk91dCBlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgc2V0U2Vzc2lvbnMoc2Vzc2lvbnMpIHtcbiAgICAgICAgICAgIGlmIChzZXNzaW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzaXdlLm1ldGhvZHMuc2lnbk91dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdBcHBLaXQ6U0lXRTpzZXRTZXNzaW9ucyAtIHNpZ25PdXQgZXJyb3InLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWRkaW5nU2Vzc2lvbnMgPSBzZXNzaW9ucy5tYXAoc2Vzc2lvbiA9PiB0aGlzLmFkZFNlc3Npb24oc2Vzc2lvbikpO1xuICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFkZGluZ1Nlc3Npb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZ2V0U2Vzc2lvbnMoY2hhaW5JZCwgYWRkcmVzcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIWNoYWluSWQuc3RhcnRzV2l0aCgnZWlwMTU1OicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50QWRkcmVzczogYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzaXdlU2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzaXdlQ2FpcE5ldHdvcmtJZCA9IGBlaXAxNTU6JHtzaXdlU2Vzc2lvbj8uY2hhaW5JZH1gO1xuICAgICAgICAgICAgICAgIGlmICghc2l3ZVNlc3Npb24gfHwgc2l3ZVNlc3Npb24uYWRkcmVzcyAhPT0gYWRkcmVzcyB8fCBzaXdlQ2FpcE5ldHdvcmtJZCAhPT0gY2hhaW5JZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRBZGRyZXNzOiBzaXdlU2Vzc2lvbi5hZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogc2l3ZUNhaXBOZXR3b3JrSWRcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZTogJydcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBbc2Vzc2lvbl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0FwcEtpdDpTSVdFOmdldFNlc3Npb25zIC0gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXBUb1NJV1guanMubWFwIiwiaW1wb3J0IHsgQXBwS2l0U0lXRUNsaWVudCB9IGZyb20gJy4uL3NyYy9jbGllbnQuanMnO1xuZXhwb3J0IHsgZ2V0QWRkcmVzc0Zyb21NZXNzYWdlLCBnZXRDaGFpbklkRnJvbU1lc3NhZ2UsIHZlcmlmeVNpZ25hdHVyZSB9IGZyb20gJy4uL2NvcmUvaGVscGVycy9pbmRleC5qcyc7XG5leHBvcnQgeyBmb3JtYXRNZXNzYWdlLCBnZXREaWRDaGFpbklkLCBnZXREaWRBZGRyZXNzIH0gZnJvbSAnQHdhbGxldGNvbm5lY3QvdXRpbHMnO1xuZXhwb3J0IHsgU0lXRUNvbnRyb2xsZXIgfSBmcm9tICcuLi9jb3JlL2NvbnRyb2xsZXIvU0lXRUNvbnRyb2xsZXIuanMnO1xuZXhwb3J0ICogZnJvbSAnLi4vY29yZS91dGlscy9UeXBlVXRpbHMuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNJV0VDb25maWcoc2l3ZUNvbmZpZykge1xuICAgIHJldHVybiBuZXcgQXBwS2l0U0lXRUNsaWVudChzaXdlQ29uZmlnKTtcbn1cbmV4cG9ydCAqIGZyb20gJy4uL3NjYWZmb2xkL3BhcnRpYWxzL3czbS1jb25uZWN0aW5nLXNpd2UvaW5kZXguanMnO1xuZXhwb3J0ICogZnJvbSAnLi4vc2NhZmZvbGQvdmlld3MvdzNtLWNvbm5lY3Rpbmctc2l3ZS12aWV3L2luZGV4LmpzJztcbmV4cG9ydCAqIGZyb20gJy4uL3NyYy9tYXBUb1NJV1guanMnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///32680\n")}}]);